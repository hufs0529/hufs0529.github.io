---
layout: post
title:  "RedShift"
subtitle:   "Integration"
categories: review
tags: RedShift
---


## Amazon Redshift Concurrency Scaling

### 특징:
- **자동 확장:** Concurrency Scaling은 자동으로 확장하여 추가 컴퓨팅 리소스를 제공합니다. 이는 동시 쿼리 요청이 증가할 때 시스템의 성능을 유지하도록 합니다.
- **초기 구성:** Concurrency Scaling은 클러스터에서 활성화되고 초기 구성된 후에 자동으로 작동합니다. 별도의 설정이 필요하지 않습니다.
- **유연한 용량:** Concurrency Scaling은 필요에 따라 자동으로 클러스터의 컴퓨팅 리소스를 확장하고 축소하여 비용을 절감합니다.
- **동시성 라우팅:** 쿼리에 대한 요청이 증가하면 Concurrency Scaling은 추가 컴퓨팅 노드를 프로비저닝하여 동시성을 처리합니다.
- **유연한 구성:** Concurrency Scaling은 Redshift 스펙트럼과 같은 기능과 함께 사용될 수 있으며, 쿼리 및 데이터 웨어하우스 요구 사항에 유연하게 대응할 수 있습니다.

### 쓰임:
- **부하 변동이 큰 환경:** 동시 쿼리 요청이 변동이 큰 경우, 예를 들어 일일 또는 시간대별로 사용량이 크게 달라지는 경우에 적합합니다.
- **대규모 쿼리 작업:** 대규모의 복잡한 쿼리 작업이 발생하는 데이터 웨어하우스 환경에서 유용합니다.
- **비영구적인 요구 사항:** 일시적으로 발생하는 쿼리 요청의 대량 처리나 특정 기간 동안의 고객 이벤트와 같은 일시적인 요구 사항을 충족시킬 때 사용됩니다.
- **최적화된 비용 관리:** 특정 시간대나 이벤트에 따라 비용을 최적화하고 싶을 때, Concurrency Scaling을 사용하여 추가 컴퓨팅 리소스를 프로비저닝하고 필요에 따라 축소하여 비용을 절감할 수 있습니다.


## Amazon Redshift Automatic Workload Management (AWLM)

### 특징:
- **자동 리소스 관리:** AWLM은 자동으로 클러스터의 자원을 관리하고 최적화합니다. 이를 통해 쿼리의 성능을 최적화하고 리소스 사용률을 극대화합니다.
- **동적 리소스 할당:** 시스템의 상태에 따라 자동으로 리소스를 할당하고 동적으로 조정하여 최상의 성능을 유지합니다.
- **유연한 설정:** 사용자는 AWLM의 설정을 조정하여 자원 관리 및 쿼리 성능을 변경할 수 있습니다. 이를 통해 다양한 비즈니스 요구에 대응할 수 있습니다.
- **자동화된 작업:** AWLM은 사용자의 수동 개입 없이 자동으로 쿼리 성능을 모니터링하고 최적화 작업을 수행합니다.
- **성능 최적화:** AWLM은 쿼리의 실행 계획을 분석하고 자동으로 최적화하여 성능을 향상시킵니다.

### 쓰임:
- **자원 최적화:** 클러스터의 자원을 효율적으로 활용하고 최적화하려는 경우 AWLM을 사용합니다.
- **자동 쿼리 최적화:** 사용자의 개입 없이 쿼리의 실행 계획을 자동으로 최적화하고 성능을 향상시키는데 사용됩니다.
- **다양한 워크로드 처리:** 다양한 유형의 워크로드에 대해 자동으로 리소스를 할당하고 관리하는데 사용됩니다.
- **비즈니스 우선순위 설정:** 비즈니스 우선순위에 따라 자동으로 리소스를 할당하고 중요한 쿼리에 대한 우선순위를 부여하는 데 사용됩니다.
- **시간 절약:** 사용자의 수동 개입 없이 자동으로 쿼리 성능을 최적화하고 리소스를 관리하여 시간을 절약할 수 있습니다.

### 사례:
1. **다양한 워크로드 환경:** 회사 A는 분석, 보고 및 대시보드 쿼리를 포함한 다양한 워크로드를 가지고 있습니다. AWLM을 사용하여 각각의 워크로드에 적합한 리소스를 자동으로 할당하여 성능을 극대화하고 비용을 절감합니다.
2. **고객 이벤트 처리:** 이커머스 회사 B는 프로모션 이벤트와 같은 고객 이벤트에 따라 쿼리 부하가 급증합니다. AWLM을 사용하여 자동으로 리소스를 확장하고 이벤트 기간 동안 고객 요구를 처리합니다.
3. **비즈니스 시간별 요구:** 금융 회사 C는 매월 월말에 금융 보고서를 생성하는 작업을 수행합니다. AWLM을 사용하여 이러한 작업에 대한 우선순위를 부여하고 시스템 자원을 동적으로 조정하여 시간에 맞춰 보고서를 생성합니다.


## Amazon Redshift Manual Workload Management

### 특징:
- **수동 리소스 관리:** Manual Workload Management(MWLM)은 사용자가 직접 리소스를 할당하고 관리하는 방식입니다. 즉, 사용자는 쿼리의 우선순위, 리소스 할당량 등을 수동으로 설정해야 합니다.
- **고정된 설정:** MWLM에서는 설정이 사용자에 의해 수동으로 조정되어야 하며, 동적으로 변경되지 않습니다.
- **유연한 제어:** 사용자는 각 쿼리 또는 쿼리 그룹에 대해 리소스를 독립적으로 할당하고 우선순위를 부여할 수 있습니다.
- **전문가 요구:** MWLM은 사용자가 시스템의 동작 및 리소스 요구를 잘 이해하고 있어야 하며, 신중한 계획과 설정이 필요합니다.

### 쓰임:
- **고정된 작업 부하:** 고정된 작업 부하가 있는 환경에서는 Manual Workload Management을 사용하여 쿼리의 우선순위와 리소스 할당을 수동으로 관리할 수 있습니다.
- **테스트 및 개발 환경:** 테스트 및 개발 환경에서는 리소스 사용량이 예측 가능하며, MWLM을 사용하여 수동으로 리소스를 관리하고 최적화할 수 있습니다.
- **특수한 요구 사항:** 특정한 비즈니스 요구에 따라 사용자가 특정 쿼리나 작업에 대해 우선순위를 부여하고 리소스를 할당할 필요가 있는 경우에 사용됩니다.

### 사례:
1. **고급 분석 작업:** 회사 A는 매월 업무 보고서를 생성하고 분석하는 작업을 수행합니다. 이러한 분석 작업은 고정된 작업 부하를 가지고 있으며, MWLM을 사용하여 리소스를 할당하고 우선순위를 부여하여 작업을 관리합니다.
2. **특정 쿼리 처리:** 금융 회사 B는 긴 실행 시간이 소요되는 특정 쿼리를 실행해야 합니다. MWLM을 사용하여 이러한 쿼리에 대해 높은 우선순위를 부여하고 충분한 리소스를 할당하여 쿼리의 성능을 보장합니다.
3. **테스트 및 개발 환경:** 회사 C는 새로운 데이터 모델을 개발하고 테스트하는데 Redshift를 사용합니다. 테스트 및 개발 환경에서는 수동으로 리소스를 할당하여 쿼리 성능을 최적화하고 테스트를 진행합니다.


## Amazon Redshift Short Query Acceleration

### 특징:
- **자동 최적화:** Short Query Acceleration(SQA)은 짧은 실행 시간을 가진 쿼리를 자동으로 감지하고 최적화합니다.
- **메모리 캐싱:** SQA는 자주 실행되는 짧은 쿼리의 결과를 메모리에 캐싱하여 반복적인 실행에서 성능을 향상시킵니다.
- **짧은 응답 시간:** SQA는 캐시된 쿼리 결과를 사용하여 짧은 응답 시간을 제공하여 사용자 경험을 향상시킵니다.
- **자동 활성화:** SQA는 기본적으로 자동으로 활성화되며, 사용자는 별도의 설정이 필요하지 않습니다.
- **비용 효율성:** SQA는 쿼리 결과를 메모리에 캐싱하여 디스크 I/O를 줄이고 클러스터 리소스를 효율적으로 사용하여 비용을 절감합니다.

### 쓰임:
- **대화형 분석:** 대화형 분석 환경에서 짧은 응답 시간을 제공하여 사용자가 빠르게 데이터를 분석하고 인사이트를 얻을 수 있습니다.
- **대규모 다수 쿼리:** 대규모로 실행되는 다수의 쿼리 중에는 짧은 실행 시간을 가지는 쿼리가 많습니다. SQA는 이러한 쿼리들을 자동으로 최적화하여 시스템의 성능을 향상시킵니다.
- **실시간 대시보드:** 실시간 대시보드나 모니터링 시스템에서 사용되는 쿼리는 일반적으로 짧은 실행 시간을 가집니다. SQA를 사용하여 이러한 쿼리의 응답 시간을 최적화할 수 있습니다.

### 사례:
1. **대규모 OLAP 환경:** 회사 A는 대규모 OLAP(Online Analytical Processing) 환경에서 대화형 분석을 수행합니다. SQA를 사용하여 짧은 응답 시간을 제공하여 사용자가 빠르게 데이터를 분석하고 비즈니스 결정을 내릴 수 있습니다.
2. **실시간 대시보드:** 이커머스 회사 B는 실시간 대시보드를 사용하여 판매량 및 고객 행동을 모니터링합니다. SQA를 사용하여 짧은 실행 시간을 가진 쿼리의 응답 시간을 최적화하여 실시간으로 데이터를 시각화합니다.
3. **분석 플랫폼:** 금융 서비스 회사 C는 고객의 금융 거래를 분석하는 분석 플랫폼을 운영합니다. SQA를 사용하여 짧은 실행 시간을 가진 다수의 쿼리를 자동으로 최적화하여 대규모 데이터를 처리하고 분석합니다.


## Amazon Redshift Vacuum 명령

### 특징:
- **데이터 정리:** Vacuum 명령은 클러스터의 불필요한 공간을 회수하고 데이터를 정리하는 데 사용됩니다.
- **테이블 관리:** Vacuum은 테이블에서 삭제된 행을 물리적으로 제거하여 저장 공간을 최적화합니다.
- **퍼포먼스 개선:** Vacuum은 데이터 정리를 통해 쿼리 성능을 향상시키고 클러스터의 일반적인 성능을 최적화합니다.
- **자동 수행:** Vacuum은 주기적으로 자동으로 실행되며, 수동으로도 실행할 수 있습니다.
- **오버헤드 최소화:** Vacuum은 클러스터의 리소스 소비를 최소화하고 효율적으로 실행됩니다.

### 쓰임:
- **데이터 정리:** 테이블에서 삭제된 행이나 오래된 데이터가 쌓여있는 경우 Vacuum을 사용하여 공간을 회수하고 데이터를 정리합니다.
- **테이블 유지 관리:** 테이블의 성능을 최적화하고 공간을 최소화하기 위해 정기적으로 Vacuum을 실행합니다.
- **대규모 데이터 작업 후:** 대규모 데이터 조작 작업(예: 데이터 로드, 병합)을 수행한 후에는 Vacuum을 사용하여 데이터를 정리하고 클러스터를 최적화합니다.

### 사례:
1. **일일 ETL 작업:** 회사 A는 매일 대규모의 데이터 ETL 작업을 수행합니다. ETL 작업 후에는 Vacuum을 실행하여 데이터를 정리하고 클러스터의 성능을 최적화합니다.
2. **대규모 데이터 로드 후:** 이커머스 회사 B는 프로모션 이벤트에 따라 대규모의 데이터를 주기적으로 로드합니다. 데이터 로드 후에는 Vacuum을 사용하여 클러스터를 최적화하고 성능을 유지합니다.
3. **데이터 워어하우스 관리:** 금융 서비스 회사 C는 데이터 웨어하우스를 운영하고 테이블을 유지 관리합니다. 정기적으로 Vacuum을 실행하여 테이블을 최적화하고 성능을 개선합니다.


## Amazon Redshift Vacuum 명령

### Vacuum Full
- **특징:** Vacuum Full은 테이블의 모든 블록을 다시 정리하여 빈 공간을 제거하고 테이블의 크기를 최적화하는 데 사용됩니다.
- **쓰임:** 테이블의 대규모 데이터 이동이나 삭제 작업 후에 사용하여 데이터의 빈 공간을 완전히 제거하고 테이블을 최적화합니다.

### Vacuum Delete Only
- **특징:** Vacuum Delete Only는 테이블에서 삭제된 행만을 대상으로 정리하여 불필요한 공간을 제거하는 데 사용됩니다. 테이블 블록 내의 빈 공간을 제거하지는 않습니다.
- **쓰임:** 테이블에서 많은 행이 삭제되었을 때 사용하여 불필요한 공간을 회수하고 성능을 개선합니다.

### Vacuum Sort Only
- **특징:** Vacuum Sort Only는 테이블의 데이터를 정렬된 상태로 유지하고 정렬을 최적화하는 데 사용됩니다. 테이블 블록 내의 빈 공간을 제거하지는 않습니다.
- **쓰임:** 정렬된 데이터가 필요한 경우, 예를 들어 ORDER BY 절을 자주 사용하는 쿼리나 병렬 처리 및 조인 성능을 최적화하는 경우에 사용됩니다.

### Reindex
- **특징:** Reindex는 테이블의 인덱스를 다시 빌드하여 인덱스의 구조를 최적화하는 데 사용됩니다. 테이블 블록 내의 빈 공간을 제거하지는 않습니다.
- **쓰임:** 인덱스를 최적화하고 성능을 개선하거나 인덱스가 손상되었을 때 사용하여 인덱스를 재구성합니다.

### 사례:
1. **대규모 데이터 이동 후 Vacuum Full 사용:** 회사 A는 대규모의 데이터 이동 작업을 수행한 후에 Vacuum Full을 사용하여 테이블을 최적화하고 성능을 개선합니다.
2. **매일 삭제된 행 정리 후 Vacuum Delete Only 사용:** 이커머스 회사 B는 매일 삭제된 행을 정리하기 위해 Vacuum Delete Only를 사용하여 테이블의 공간을 최적화합니다.
3. **정렬된 데이터 유지를 위해 Vacuum Sort Only 사용:** 금융 서비스 회사 C는 특정 테이블에서 ORDER BY 절을 자주 사용하는 경우에 Vacuum Sort Only를 사용하여 데이터를 정렬된 상태로 유지하고 성능을 개선합니다.
4. **인덱스 구조 최적화를 위해 Reindex 사용:** 데이터 웨어하우스 회사 D는 인덱스가 손상되었을 때 또는 인덱스의 구조를 최적화해야 할 때 Reindex를 사용하여 데이터베이스의 성능을 최적화합니다.


## Amazon Redshift Anti-Pattern

### 특징:
- **비효율적인 쿼리:** 쿼리의 조인, 집계, 정렬 등이 비효율적으로 구성되어 있거나 큰 테이블을 전체 스캔하는 경우와 같이 성능에 부정적인 영향을 미치는 쿼리가 있는 것을 의미합니다.
- **데이터 모델링의 부적절한 사용:** 데이터 모델이 정규화되어 있지 않거나 적절한 디자인이 되어있지 않아 데이터의 중복이 많고 쿼리 성능에 영향을 줄 수 있는 경우가 있습니다.
- **과다한 테이블 병합:** 많은 수의 테이블을 조인하는 쿼리나 많은 테이블을 병합하는 경우, 성능 저하를 초래할 수 있습니다.
- **데이터 불일치:** Redshift와 다른 데이터 소스 간의 데이터 불일치가 발생하는 경우, 신뢰할 수 없는 결과를 초래할 수 있습니다.

### 쓰임:
- **성능 최적화:** 비효율적인 쿼리를 최적화하고 성능을 향상시키는 것이 주요 목적입니다.
- **비용 절감:** 비효율적인 쿼리나 데이터 모델을 개선함으로써 리소스 사용량을 줄이고 비용을 절감합니다.
- **데이터 일관성 유지:** 데이터 모델링을 개선하여 데이터 일관성을 유지하고 정확성을 향상시킵니다.

### 사례:
1. **Cross Join 사용:** 잘못된 조인 조건이나 Cross Join을 사용하여 모든 테이블을 결합하는 쿼리가 있는 경우, 대규모 데이터 병합 및 성능 저하를 초래할 수 있습니다.
2. **데이터 중복:** 동일한 데이터가 여러 테이블에 중복 저장되거나 정규화되지 않은 데이터 모델을 사용하는 경우, 성능 저하와 데이터 불일치 문제가 발생할 수 있습니다.
3. **Full Table Scan:** 필요한 데이터를 추출하기 위해 전체 테이블을 스캔하는 쿼리가 있는 경우, 대규모 데이터 처리에 많은 시간과 리소스가 소비되어 성능이 저하됩니다.
4. **Suboptimal Indexing:** 쿼리에 사용되는 인덱스가 적절하지 않거나 인덱스가 없는 경우, 데이터 검색 및 처리에 소요되는 시간이 길어져 성능이 저하될 수 있습니다.
