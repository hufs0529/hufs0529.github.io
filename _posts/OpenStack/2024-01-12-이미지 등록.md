---
layout: post
title:  "OpenStack"
subtitle:   "OpenStack 개념 잡기"
categories: review
tags: OpenStack
---

## OpenStack Linux Image 등록
1. Cloud 전용 이미지
    - [ubuntu] https://cloud-images.ubuntu.com/focal/current
        - focal-server-cloudimg-amd64

    - [rocky] https://download.rockylinux.org/pub/rocky/8/images/x86_64/
        - 


## 트러블슈팅
1. 하드웨어: x86
2. 이미지: Rocky-8-latest-x86_64-minimal
    - 로그: ```
            오류: Build of instance 9976ce1f-8651-44be-aa2a-83ec3b5a5b13 aborted: Volume 715d3fcb-8101-40a4-99f5-c7605be4a771 did not finish being created even after we waited 27 seconds or 10 attempts. And its status is error
            ```

    이미지: rocky-8-latest-x86-64-boot
    - 로그: ```
            메시지
            Build of instance 0d19efa6-a082-4531-8403-ef9e77b13b44 aborted: Volume ed42aaca-0302-43f1-97bd-c6c092f52f42 did not finish being created even after we waited 12 seconds or 5 attempts. And its status is error.
            코드
            500
            세부 정보
            Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2087, in _prep_block_device driver_block_device.attach_block_devices( File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 936, in attach_block_devices _log_and_attach(device) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 933, in _log_and_attach bdm.attach(*attach_args, **attach_kwargs) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 831, in attach self.volume_id, self.attachment_id = self._create_volume( File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 435, in _create_volume self._call_wait_func(context, wait_func, volume_api, vol['id']) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 785, in _call_wait_func with excutils.save_and_reraise_exception(): File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 227, in __exit__ self.force_reraise() File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 200, in force_reraise raise self.value File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 783, in _call_wait_func wait_func(context, volume_id) File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 1704, in _await_block_device_map_created raise exception.VolumeNotCreated(volume_id=vol_id, nova.exception.VolumeNotCreated: Volume ed42aaca-0302-43f1-97bd-c6c092f52f42 did not finish being created even after we waited 12 seconds or 5 attempts. And its status is error. During handling of the above exception, another exception occurred: Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2735, in _build_resources block_device_info = self._prep_block_device(context, instance, File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2106, in _prep_block_device raise exception.InvalidBDM(str(ex)) nova.exception.InvalidBDM: Volume ed42aaca-0302-43f1-97bd-c6c092f52f42 did not finish being created even after we waited 12 seconds or 5 attempts. And its status is error. During handling of the above exception, another exception occurred: Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2340, in _do_build_and_run_instance self._build_and_run_instance(context, instance, image, File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2545, in _build_and_run_instance with excutils.save_and_reraise_exception(): File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 227, in __exit__ self.force_reraise() File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 200, in force_reraise raise self.value File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2500, in _build_and_run_instance with self._build_resources(context, instance, File "/usr/lib/python3.10/contextlib.py", line 135, in __enter__ return next(self.gen) File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2747, in _build_resources raise exception.BuildAbortException(instance_uuid=instance.uuid, nova.exception.BuildAbortException: Build of instance 0d19efa6-a082-4531-8403-ef9e77b13b44 aborted: Volume ed42aaca-0302-43f1-97bd-c6c092f52f42 did not finish being created even after we waited 12 seconds or 5 attempts. And its status is error.
            ```

    이미지: Rocky-8-GenericCloud-Base.latest.x86_64
    - 로그: ```
            메시지
            Build of instance a6a6cd62-a436-4e05-a2fd-6ee791746d67 aborted: Volume 7442d2c4-7772-4b85-9e5e-202157a2494f did not finish being created even after we waited 185 seconds or 61 attempts. And its status is downloading.
            코드
            500
            세부 정보
            Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2087, in _prep_block_device driver_block_device.attach_block_devices( File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 936, in attach_block_devices _log_and_attach(device) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 933, in _log_and_attach bdm.attach(*attach_args, **attach_kwargs) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 831, in attach self.volume_id, self.attachment_id = self._create_volume( File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 435, in _create_volume self._call_wait_func(context, wait_func, volume_api, vol['id']) File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 785, in _call_wait_func with excutils.save_and_reraise_exception(): File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 227, in __exit__ self.force_reraise() File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 200, in force_reraise raise self.value File "/usr/lib/python3/dist-packages/nova/virt/block_device.py", line 783, in _call_wait_func wait_func(context, volume_id) File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 1704, in _await_block_device_map_created raise exception.VolumeNotCreated(volume_id=vol_id, nova.exception.VolumeNotCreated: Volume 7442d2c4-7772-4b85-9e5e-202157a2494f did not finish being created even after we waited 185 seconds or 61 attempts. And its status is downloading. During handling of the above exception, another exception occurred: Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2735, in _build_resources block_device_info = self._prep_block_device(context, instance, File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2106, in _prep_block_device raise exception.InvalidBDM(str(ex)) nova.exception.InvalidBDM: Volume 7442d2c4-7772-4b85-9e5e-202157a2494f did not finish being created even after we waited 185 seconds or 61 attempts. And its status is downloading. During handling of the above exception, another exception occurred: Traceback (most recent call last): File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2340, in _do_build_and_run_instance self._build_and_run_instance(context, instance, image, File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2545, in _build_and_run_instance with excutils.save_and_reraise_exception(): File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 227, in __exit__ self.force_reraise() File "/usr/lib/python3/dist-packages/oslo_utils/excutils.py", line 200, in force_reraise raise self.value File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2500, in _build_and_run_instance with self._build_resources(context, instance, File "/usr/lib/python3.10/contextlib.py", line 135, in __enter__ return next(self.gen) File "/usr/lib/python3/dist-packages/nova/compute/manager.py", line 2747, in _build_resources raise exception.BuildAbortException(instance_uuid=instance.uuid, nova.exception.BuildAbortException: Build of instance a6a6cd62-a436-4e05-a2fd-6ee791746d67 aborted: Volume 7442d2c4-7772-4b85-9e5e-202157a2494f did not finish being created even after we waited 185 seconds or 61 attempts. And its status is downloading.
            ```